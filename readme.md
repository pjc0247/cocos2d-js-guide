cocos2d-js-guide
====
cocos2d-js는 자바스크립트로 HTML5환경에서 동작하는 게임을 작성할 수 있는 게임 엔진입니다. 전체적인 API가 `cocos2d-x`와 매우 비슷하므로, cocos2d-js를 익히면 cocos2d-x에 빠르게 적응할 수 있고, 그 반대의 경우에도 마찬가지입니다.<br>
이 문서에서는 cocos2d-js를 이용하여 간단한 웹 게임을 만드는 방법을 소개합니다.

자바스크립트에 대해서
----
* 자바스크립트는 보통 2개의 스페이스로 `indent`를 표기합니다.
* 줄 끝에 세미콜론(`;`)은 강제 사항이 아니나, 보통 붙이는것이 일반적입니다.
* 만약 코코스 화면이 뜨지 않고, 하얀 화면만 보인다면 작성한 자바스크립트에 문법 오류가 있는 경우입니다. 이 경우 개발자 도구(F12)를 눌러 콘솔을 확인해주세요.

Scene
----
보통의 게임 엔진들은 게임을 `Scene` 단위로 나누어서 관리합니다. 하나의 씬은 '로그인 화면', '로딩 화면', '실제 게임 화면' 등으로 예를 들 수 있으며, 이러한 씬들이 모여서 하나의 게임이 탄생합니다.<br>
<br>
`cocos2d` 역시 엔진 레벨에서 `Scene` 개념을 지원합니다. `cocos2d-js`의 베이스 코드에는 이미 기본 씬이 포함되어 있으며, 이 가이드에서는 해당 씬을 그대로 사용하도록 하겠습니다.<br>
<br>
__베이스 코드에 포함된 `MyScene` 의 모습__
```js
var MyScene = cc.Scene.extend({
  onEnter:function () {
    this._super();

    // onEnter는 씬이 사용 가능 상태가 되면 호출됩니다.
    // 이곳에 씬의 초기화 코드를 작성합니다.
    //
    // 보통 이곳에서 하는 작업들
    //   - 리소스의 로드
    //   - 게임 오브젝트의 배치
    //   - 배경 음악 재생 등
  }
});
cc.director.runScene(new MyScene());
```
__씬에서만 사용할 변수 만들기__<br>
씬 내부적으로 사용할 변수를 지정하기 위해서는 아래와 같이 코드를 작성합니다. 주의해야 할 점은 `=` 를 사용해서 초기화하는것이 아닌 `:`를 사용해서 값을 초기화합니다. 또한 변수 뒤에 이어지는 변수가 있을 경우 반드시 콤마(`,`)를 적어주세요.
```js
var MyScene = cc.Scene.extend({
  playerLevel : 10,
  money : 99999
  
  /* ... */
});
```
__전역 변수 만들기__<br>
씬 밖의 영역에 변수를 선언하면 자동으로 전역 변수로 동작합니다.<br>
이렇게 전역 변수로 만들어진 값은 씬 간에 공유될 수 있습니다. 
```js
var globalVariable = "Hi";

var MyScene = cc.Scene.extend({
  /* ... */
});
```

<br>
이미지 출력하기
----
씬에 이미지를 배치시키는 방법에 대해 알아봅니다. 아래 코드를 `onEnter` 내부에 작성합니다.
```js
var sprite = cc.Sprite.create("HelloWorld.png");
sprite.setPosition(200, 200);
this.addChild(sprite, 0);
```
그림이 정상적으로 표시되는걸 확인했다면 이번에는 `HelloWorld.png` 대신에 좋아하는 캐릭터 그림을 넣어서 실행해 보세요. 해당 그림은 `index.html`과 같은 폴더에 위치하여야 하며, 파일 이름은 대소문자를 구분합니다.
<br>
__코코스의 좌표계__<br>
코코스는 일반적인 윈도우의 좌표계와는 조금 다른 좌표 시스템을 사용합니다.<br>
![pos](pos.png)<br>
좌측 하단이 `(0, 0)`이며, 위로 갈수록 `y` 좌표가 증가합니다. 오른쪽으로 갈수록 `x` 좌표가 증가하는것은 일반적인 다른 좌표계와 동일합니다.<br>
위에서 작성한 코드 중 `setPosition` 메소드에 넘겨주는 값을 바꿔 실제로 한번 테스트 해 보세요.
```js
// x값을 증가시켰습니다. 
//   스프라이트는 기존보다 오른쪽으로 이동합니다.
sprite.setPosition(400, 200);
```
```js
// y 값을 증가시켰습니다.
//   스프라이트는 기존보다 위로 이동합니다.
sprite.setPosition(200, 400);
```

애니메이션
----
애니메이션을 이용하면 그림을 움직이거나 회전시키거나 다양한 효과를 줄 수 있습니다.<br>
<br>
__애니메이션의 기본__<br>
모든 애니메이션은 `runAction` 메소드와 함께 시작합니다. `runAction` 메소드에 인자로 실행할 애니메이션을 입력하면 해당 애니메이션이 즉시 실행됩니다.
```js
sprite.runAction(실행할_애니메이션);
```
또한 애니메이션에는 보통 `By`와 `To`의 두종류가 존재합니다. __By__는 현재 값을 기준으로(delta) 애니메이션하겠다는 의미이며, __To__는 무조건 지정된 값까지 애니메이션한다는 뜻입니다. 이에 대해서는 뒤에서 자세히 알아보도록 하겠습니다.<br>
<br>
__좌표 애니메이션__<br>
가장 간단하게 좌표를 이동하는 애니메이션을 다뤄보도록 하겠습니다. `MoveBy` 를 이용하여 현재 위치를 기준으로 스프라이트를 이동시킬 수 있습니다.
```js
// 그림이 1초동안 (200, 0) 만큼 이동합니다.
sprite.runAction(
  cc.MoveBy.create(1, cc.p(200,0)));
```
이전 예제에서는 `By`를 사용하였으니, 이번에는 `To`를 사용해보도록 하겠습니다.<br>
아래 예제는 현재 위치와 관계없이 무조건 지정된 위치로 스프라이트가 이동합니다.
```js
// 그림이 1초동안 (200, 0) 을 향해 이동합니다.
sprite.runAction(
  cc.MoveTo.create(1, cc.p(200,0)));
```
<br>
__투명도 애니메이션__<br>
`FadeTo`를 이용하여 그림을 투명하거나, 반투명 상태로 만들 수 있습니다. 투명도는 `0~255` 사이의 값을 가지며 0일 경우에는 완전 투명 / 255일 경우 완전 불투명 / 그 중간 값들은 이미지가 얼마나 불투명하게 표시되어야 하는지 나타냅니다.
```js
// 이미지가 1초동안 완전히 투명하게 변합니다.
sprite.runAction(
  cc.FadeTo.create(1, 0));
```
__사이즈 애니메이션__<br>
`ScaleTo`를 이용해 그림의 크기를 바꿀 수 있습니다.
```js
// 1초동안 그림이 2배 크기로 변합니다.
sprite.runAction(
  cc.ScaleTo.create(1, 2));
```
__순차적 애니메이션 실행하기__<br>
경우에 따라서는 여러개의 애니메이션을 조합해야 할 경우가 있습니다. `Sequence` 를 이용하면 두개 이상의 애니메이션을 순차실행시킬 수 있습니다.<br>
![bird](sequence.gif)<br>
```js
// 이미지를 2배 커지게 한다음 원래 크기로 돌아옵니다.
sprite.runAction(
  cc.Sequence.create(
    cc.ScaleTo.create(0.5, 2),
    cc.ScaleTo.create(0.5, 1)
  ));
```
__애니메이션 반복하기__<br>
만약 애니메이션을 무한반복 시키고 싶다면 `RepeatForever` 를 사용합니다. 아래 예제는 이미지를 커졌다 작아졌다가 무한 반복되도록 합니다.
```js
sprite.runAction(
  cc.RepeatForever.create(
    cc.Sequence.create(
      cc.ScaleTo.create(0.5, 2),
      cc.ScaleTo.create(0.5, 1)
  )));
```
무한정 반복이 아니고 지정된 숫자만큼 반복하려면 `Repeat`을 사용합니다.
```js
sprite.runAction(
  cc.Repeat.create(
    cc.Sequence.create(
      cc.ScaleTo.create(0.5, 2),
      cc.ScaleTo.create(0.5, 1)
  ),
  3 /* 3번 반복하라고 지정합니다 */ ));
```
__딜레이 주기__<br>
몇 초 후에 애니메이션을 실행하고 싶다면 `DelayTime`을 사용합니다. `DelayTime`은 거의 모든 경우에 `Sequence`와 혼합하여 사용 합니다.<br>
`DelayTime`에는 얼마나 멈출지를 __초__ 단위로 지정합니다.
```js
// 1초 딜레이 하고
// `ScaleTo` 를 순차적으로 실행합니다.
sprite.runAction(
  cc.Sequence.create(
    cc.DelayTime.create(1), // 1초 대기
    cc.ScaleTo.create(0.5, 2), // 0.5초동안 2배로 커짐
    cc.ScaleTo.create(0.5, 1) // 0.5초동안 1배(원래 사이즈)로 돌아옴
  ));
```
<br>
음악 재생하기
----

하이라키 시스템
----
`cocos2d`는 하이라키(hierarchy) 시스템을 가지고 있습니다. 이는 대부분의 게임 엔진이 기본적으로 지원하는 항목이며 여러개의 연관성 있는 게임 오브젝트들을 하나로 묶어서 손쉽게 관리할 수 있도록 해 줍니다.<br>
<br>
__자식 노드 추가하기__<br>
```js

```
